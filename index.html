<!DOCTYPE html>
<html>

<head>
	<!-- include CAPH 3.0.1 default package -->
	<link href="lib/caph/3.0.1/caph.min.css" rel="stylesheet" type="text/stylesheet">
		<link rel="stylesheet" href="css/style.css">
	<!-- include jQuery file (you can use jQuery in your environment) -->
	<script src="lib/caph/3.0.1/bower_components/jquery/dist/jquery.min.js" type="text/javascript"></script>
	<script src="lib/caph/3.0.1/bower_components/lodash/lodash.js" type="text/javascript"></script>
	<!-- include the CAPH Package for jquery -->
	<script src="lib/caph/3.0.1/caph-jquery.min.js"></script>
	<script src="main.js"></script>
	<script>
		$(document).ready(function () {
			$.caph.focus.activate(function (nearestFocusableFinderProvider, controllerProvider) {
				controllerProvider.onFocused(function (event, originalEvent) {
					window.currentFocus = event.currentTarget.closest('div.section').id
					const parSection = event.currentTarget.closest('div.section')
					parSection.querySelector('.sectionTitle').style.opacity = 1
					const items = parSection.querySelectorAll('.item')
					items.forEach(item => {
						item.style.opacity = 1
					})

					const description = document.querySelector('.header')
					const name = event.currentTarget.getAttribute('data-name')
					const story = event.currentTarget.getAttribute('data-story')
					description.innerHTML = `<h2>Title: ${name}.</h2>`
					description.innerHTML += ` Story in brief: ${story !== '' ? story : 'Sorry no story to display.'}`
				})

				controllerProvider.onBlurred(function (event, originalEvent) {
					window.previousFocus = event.currentTarget.closest('div.section').id
					const parSection = event.currentTarget.closest('div.section')
					parSection.querySelector('.sectionTitle').style.opacity = 0.1
					const items = parSection.querySelectorAll('.item')
					items.forEach(item => {
						item.style.opacity = 0.1
					})
				})

				controllerProvider.onSelected(function (event, originalEvent) {
					const description = document.querySelector('.header')
					const name = event.currentTarget.getAttribute('data-name')
					window.alert(`Title: ${name}.`)
				})
			})
		})
	</script>
</head>

<body>
	<div class="wrapper">
		<div class="header">
		</div>
		<div class="content">
			<div class="list-container">
			</div>
		</div>
	</div>
</body>

</html>